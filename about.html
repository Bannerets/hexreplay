<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>About Interactive Hex Board</title>
    <link rel="stylesheet" href="hexreplay.css">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body class="about">

    <h1>Interactive Hex Board</h1>

    <h2>Link</h2>

    <p>
      <a href="https://hexworld.org/board">https://hexworld.org/board</a>
    </p>
    
    <h2>Usage</h2>

    <h3>Board:</h3>
    
    <ul>
      <li> Click on a cell to make a move.
      <li> Click again on stone to swap.
      <li> Hover over a cell to see its coordinates.
    </ul>

    <h3>Buttons and menus:</h3>
    
    <ul>
      <li> <button class="text-button" id="button-clear" type="button"
                  title="Clear">New board</button>: Create new empty
                  board. Previous board will be saved in browser
                  history.
        <li> Size: <input class="input" id="input-size" type="text"
                       title="Board size" size="3">: Change board
                       size. Both "11" and "11x12" will work. Previous
                       board will be saved in browser history.
      <li> <button class="button" id="button-rotate-left" type="button"
                  title="Rotate left"></button>
          <button class="button" id="button-rotate-right" type="button"
                  title="Rotate right"></button>: Rotate left or right.
      <li> <button class="button" id="button-numbered"
                   title="Show move numbers"></button>:
        Toggle move numbers.
      <li> <button class="button" id="button-menu"
                  title="More actions"></button>: Menu with
                  additional controls: swap, pass, resign, or change colors.
      <li> <button class="button" id="button-first" type="button"
                title="First (home)"></button>
        <button class="button" id="button-undo" type="button"
                title="Previous (left)"></button>
        <button class="button" id="button-redo" type="button"
                title="Next (right)"></button>
        <button class="button" id="button-last" type="button"
                title="Last (end)"></button>: Game navigation buttons:
                first, previous, next, last.
    </ul>

    <h3>Game navigation</h3>

    <ul>
      <li> Keyboard shortcuts for navigation:
        <ul>
          <li>"home" (first), "left" (previous), "right" (next), "end" (last).
          <li>Alternative: "f" (first), "p" (previous), "n" (next), "l" (last).
          <li>Alternative: "up" (previous) and "down" (next).
        </ul>
      <li> Click on a move in move list to navigate directly to it.
    </ul>

    <h3>Sharing</h3>

    <ul>
      <li> Copy the URL to share the current board with others.
    </ul>

    <h2>Importing games from other sites</h2>

    <h3>Board Game Arena</h3>

    <p>
      The user
      <a href="https://boardgamearena.com/player?id=85283280">comonoid</a>
      has contributed a
      <a href="https://gist.github.com/Bannerets/9a8bce3ae2ea5e82bab935c037b893ac">bookmarklet</a>
      for importing a game record from Board Game Arena directly into
      HexWorld. To use it, copy the following text and paste it into
      the "URL" portion of a bookmark:
    </p>

    <div class="codearea">
      <pre id="bookmarklet" class="code">javascript:void%20function(){(function(){function%20a(a){let%20b,c;return%20a.reduce((a,b)=%3E[...a,...b.data],[]).map(({type:a,args:d,log:e})=%3E{if(%22message%22===a%26%26d.size){const%20a=d.size.match(/(\d+)x\d+/);if(a)return%20a[1]+%22c1,%22}if(%22playToken%22===a){b||(b=d.player_name);const%20a=c===d.player_id%3F%22:p%22+d.coord:d.coord;return%20c=d.player_id,a}return%22swapPieces%22===a%3F(c=d.player_id,%22:s%22):%22pass%22===a%3F(c=d.player_id,%22:p%22):%22${player_name}%20resigns%22===e||%22playerConcedeGame%22===a%3Fd.player_name===b%3F%22:rb%22:%22:rw%22:void%200}).join(%22%22)}function%20b(a,b){const%20d=window.open(%22about:blank%22);fetch(a,{cache:%22no-cache%22}).then(a=%3Ea.json()).then(a=%3E{const%20e=b(a);d.location.href=c+e}).catch(a=%3E{console.error(a),window.alert(a+%22%22),d.close()})}const%20c=%22https://hexworld.org/board/%23%22,d=window.location.href,e=d.match(/\/(%3F:table|gamereview)\%3Ftable=(\d+)($|%26)/),f=d.match(/\/replay\/.*%3F\/\%3Ftable=\d+($|%26)/),g=d.match(/\/(\d+\/hex)\%3Ftable=(\d+)($|%26)/);if(e){const%20c=e[1];return%20void%20b(`${window.location.origin}/archive/archive/logs.html%3Ftable=${c}`,b=%3Ea(b.data.data.data))}if(f){const%20b=g_gamelogs;if(!b)return%20void%20window.alert(%22Error.%20No%20\%22g_gamelogs\%22%20variable%20found.%22);const%20d=a(b);return%20void%20window.open(c+d)}if(g){const%20c=g[1],d=g[2];return%20void%20b(`${window.location.origin}/${c}/hex/notificationHistory.html%3Ftable=${d}%26from=1%26privateinc=1%26history=1`,b=%3Ea(b.data.data))}window.alert(%22No%20table%20found.%20Use%20this%20bookmark%20while%20viewing%20a%20Hex%20game%20on%20Board%20Game%20Arena.%22)})()}();</pre>
      <button onclick="navigator.clipboard.writeText(document.querySelector('#bookmarklet').innerText)">Copy to clipboard</button>
    </div>

    <p>
      You can then use this bookmark from any Hex game on Board Game
      Arena. It works both for completed games and games in progress,
      and can be executed on /hex, /table, /gamereview, or
      /archive/replay pages.
      Watch <a href="video/bookmarklet.mp4">this short video</a> to
      see how to set up and use the bookmarklet.
    </p>
    
    <h2>Information for developers</h2>

    <p>
      The URL hash field (the part after "#") contains a complete
      representation of the board and game state. Not all types of
      moves are accessible in the user interface. The syntax is:
    </p>
    
    <pre>
⟨hash⟩   ::= ⟨size⟩⟨config⟩*,⟨move⟩*,⟨move⟩*  (trailing commas can be omitted)

⟨size⟩   ::= ⟨n⟩                              (board size: 1–30)
           | ⟨n⟩x⟨n⟩                          (board size: 1–30)
⟨config⟩ ::= r⟨n⟩                             (rotation: 1–12, a1 is clock direction)
           | n                                (turn on move numbers)
           | c1                               (red-blue mode)

⟨move⟩   ::= ⟨cell⟩                           (normal move)
           | :s                               (swap pieces)
           | :S                               (swap sides)
           | :p                               (pass)
           | :rb                              (Black resigns)
           | :rw                              (White resigns)
           | :fb                              (Black forfeits)
           | :fw                              (White forfeits)

⟨n⟩ is an integer, such as 11.
⟨cell⟩ is a cell name, such as a1.</pre>

    <p>
      The comma in the move list indicates the current move.
    </p>

    <h2>Author</h2>

    <p>
      &copy; 2021 Peter Selinger, <i><a href="mailto:selinger@mathstat.dal.ca">selinger@mathstat.dal.ca</a></i>.
    </p>
    
  </body>
</html>
